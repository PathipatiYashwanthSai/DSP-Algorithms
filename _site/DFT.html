<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0-beta1/dist/css/bootstrap.min.css" 
    rel="stylesheet" integrity="sha384-0evHe/X+R7YkIZDRvuzKMRqM+OrBnVFBL6DOitfPri4tjfHxaWutUpFmBp4vmVor" crossorigin="anonymous">
    <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Symbols+Sharp">
    <link rel="stylesheet" href="page.css">
    <title>DFT</title>
</head>
<body>
    <!-- <script src="https://pagecdn.io/lib/mathjs/10.5.3/math.min.js" crossorigin="anonymous"></script> -->
    <script src="https://pagecdn.io/lib/mathjs/11.0.1/math.min.js" crossorigin="anonymous"  ></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.9.4/Chart.js"></script>
    <div class="container">
    <aside>
        <div class="top">
            <h2>DSP</h2>
            <div class="close" id="close-btn">
                <span class="material-symbols-sharp">close</span>
            </div>
        </div>
        <div class="sidebar">
            <a href="index.html" class="active">
                <h3>Home Page</h3>
            </a>
            <a href="CrossCorr.html" class="">
                <h3>Cross Correlation</h3>
            </a>
            <a href="AutoCorr.html" class="">
                <h3>Auto Correlation</h3>
            </a>
            <a href="LinearConvolution.html" class="">
                <h3>Linear Convolution</h3>
            </a>
            <a href="CircularConvolution.html" class="">
                <h3>Circular Convolution</h3>
            </a>
            <a href="DFT.html" class="">
                <h3>Discrete Fourier Transform</h3>
            </a>
            <a href="IDFT.html" class="">
                <h3>Inverse Discrete Fourier Transform</h3>
            </a>
            <a href="Properties.html" class="">
                <h3>DFT & IDFT Properties</h3>
            </a>
            <a href="Linearity.html" class="">
                <h3>Linearity Property</h3>
            </a>
            <a href="LinearConvolutionUsingDFT&IDFT.html" class="">
                <h3>Linear Convolution Property</h3>
            </a>
            <a href="CircularConvolutionUsingDFT&IDFT.html" class="">
                <h3>Circular Convolution Property</h3>
            </a>
            <a href="CircularTimeShift.html" class="">
                <h3>Circular Timeshift Property</h3>
            </a>
            <a href="Modulation.html" class="">
                <h3>Modulation Property</h3>
            </a>
        </div>
    </aside>
    <div class="flex-container">
        <main>
            <h2 style="text-align: center;">Discrete Fourier Transform</h2><br>
            <p>In mathematics, the <b>discrete Fourier transform (DFT)</b> converts a finite sequence of equally-spaced samples of a function into a same-length sequence of equally-spaced samples of the < title="In mathematics, the discrete-time Fourier transform (DTFT) is a form of Fourier analysis that is applicable to a sequence of values." DTFT which is a complex-valued function of frequency. The interval at which the DTFT is sampled is the reciprocal of the duration of the input sequence.</p>
            <p>The DFT is therefore said to be a frequency domain representation of the original input sequence. If the original sequence spans all the non-zero values of a function, its DTFT is continuous (and periodic), and the DFT provides discrete samples of one cycle. If the original sequence is one cycle of a periodic function, the DFT provides all the non-zero values of one DTFT cycle.</p>
            <p>The DFT is the most important discrete transform, used to perform Fourier analysis in many practical applications. In digital signal processing, the function is any quantity or signal that varies over time, such as the pressure of a sound wave, a radio signal, or daily temperature readings, sampled over a finite time interval. In image processing, the samples can be the values of pixels along a row or column of a raster image. The DFT is also used to efficiently solve partial differential equations, and to perform other operations such as convolutions or multiplying large integers.</p>
            <p> The formula used for the calculation of DFT of an input sequence is :</p>
            <img src="assets/DFT_formula.svg" class="mx-auto d-block" alt="DFT formula" width="50%" style="background: #fff;">
            <h3>Example :</h3><br>
            <img src="assets/Screenshot 2022-07-15 152209.png" alt="DFT example" class="mx-auto d-block" width="80%"><br><br>
            <p>The step-by-step values for the provided input is shown below :</p>
            <br><br>
            <table id="exp">
            </table>
            <br><br>
        </main>
        <div class="right">
            <div class="top">
                <button id="menu-btn">
                    <span class="material-symbols-sharp">menu</span>
                </button>
                <div class="theme-toggler">
                    <span class="material-symbols-sharp active">light_mode</span>
                    <span class="material-symbols-sharp">dark_mode</span>
                </div>
            </div>
            <div class="interface-section">
                <br><br>
                <h3>Enter the input sequence :</h3>
                <input id="inp" placeholder="1,2,3,4..." onchange="dft()"/>
                <br><br>
                <h4 id="dftResponse"></h4>
                <br><br>
                <h4 class="plot-title" id="mag-title">Magnitude Plot of DFT sequence :</h4><br>
                <!-- magnitude sequence plot is displayed -->
                <canvas class="outputSequence" id="magResp"></canvas>
                <br><br>
                <h4 class="plot-title" id="ph-title">Phase Plot of DFT sequence :</h4><br>
                <!-- phase sequence plot is displayed -->
                <canvas class="outputSequence" id="phResp"></canvas><br><br>
            </div>
        </div>
    </div>
</div>
<script type="text/javascript">
    function dft() {
        // function to perform dft
        // The explanatory table is initiated with null
        document.getElementById("exp").innerHTML="";
        // Input sequences are taken
        const x = document.getElementById("inp").value.split(",");
        const xt = x.map((val) => parseFloat(val));
        // N is the length to which dft is performed
        const N = x.length;
        const xk = [];
        const real = [];
        const img = [];
        const explanation = [];
        for(let k=0;k<N;k++) {
            realSum = 0;
            imgSum = 0;
            step = [];
            for(let n=0;n<N;n++) {
                re = xt[n]*Math.cos(2*Math.PI*k*n/N).toFixed(2);
                im = -(xt[n]*Math.sin(2*Math.PI*k*n/N).toFixed(2));
                step.push(Math.round(re) + "+ " + "i" + "(" + Math.round(im) + ")");
                realSum += re;
                imgSum += im;
            }
            explanation.push(step);
            real.push(realSum);
            img.push(imgSum);
            if(imgSum<0) {
                xk.push(String(Math.round(realSum)) + String(Math.round(imgSum)) + "i");
            } else if(imgSum>0) {
                xk.push(Math.round(realSum) + "+" + Math.round(imgSum) + "i");
            } else {
                xk.push(Math.round(realSum));
            }
        }
        const magResp = [];
        const phResp = [];
        for(let j=0; j<N; j++) {
            magResp.push(Number(Math.sqrt(Math.pow(real[j],2) + Math.pow(img[j],2)).toFixed(2)));
            ph = Number((Math.atan(img[j]/real[j])*180/Math.PI).toFixed(2));
            if (real[j]>=0 & img[j]>=0) {
                phResp.push(ph);
            } else if (real[j]<0 & img[j]<0) {
                phResp.push(ph-180);
            } else {
                phResp.push(ph + 180);
            }
        }
        // output response is displayed
        document.getElementById("dftResponse").innerText= "The DFT sequence is : \n" + xk;

        // step-by-step of convolution is displayed
        var tr = document.createElement('tr');
        var str ='<th>X[k]\\x[n]</th>';
        for(let i=0;i<N;i++) {
            str+=`<th> n = ${i}</th>`;
            tr.innerHTML=str;
        }
        document.getElementById("exp").appendChild(tr);
        for(let i=0;i<N;i++) {
            var tr = document.createElement('tr');
            str=`<th> k = ${i}</th>`;
            for(let j=0;j<N;j++) {
                str += `<td> ${explanation[i][j]}</td>`;
                tr.innerHTML=str;
            }
            document.getElementById("exp").appendChild(tr);
        }
        document.getElementById("exp").innerHTML += `</tr>`

        // magnitude response will be plotted
        const xyMagValues = [];
        for(let j=0; j<N; j++) {
            xyMagValues.push({x:j,y:magResp[j]});
        }
        new Chart("magResp", {
            type: "scatter",
            data: {
                datasets: [{
                    pointRadius: 4,
                    pointBackgroundColor: "rgb(0,0,255)",
                    data: xyMagValues
                }]
            },
            options: {
                legend: {display: false}
            }
        });

        // phase response will be plotted
        const xyPhValues = [];
        for(let j=0; j<N; j++) {
            xyPhValues.push({x:j,y:phResp[j]});
        }
        new Chart("phResp", {
            type: "scatter",
            data: {
                datasets: [{
                    pointRadius: 4,
                    pointBackgroundColor: "rgb(0,0,255)",
                    data: xyPhValues
                }]
            },
            options: {
                legend: {display: false}
            }
        });

        // specific texts are displayed
        document.getElementById("magResp").style.display ="block";
        document.getElementById("mag-title").style.display ="block";
        document.getElementById("phResp").style.display ="block";
        document.getElementById("ph-title").style.display ="block";

    }
</script>
    <script src="responsive.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0-beta1/dist/js/bootstrap.bundle.min.js" 
    integrity="sha384-pprn3073KE6tl6bjs2QrFaJGz5/SUsLqktiwsUTF55Jfv3qYSDhgCecCxMW52nD2" crossorigin="anonymous"></script>
</body>
</html>